<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Quản lý bàn ăn</title>
    <link rel="stylesheet" href="css/style.css">

</head>
<body>
    <!-- Tiêu đề -->
    <div class="header">
        <button class="menu-btn" onclick="toggleSidebar()">&#9776;</button>
        <h1>Quản lý bàn ăn</h1>
        <div class="user-info" id="userInfo"></div>
    </div>

    <!-- Thanh bên -->
    <div class="sidebar" id="sidebar">
        <button class="close-btn" onclick="toggleSidebar()">&#9776;</button>
         <a href="dashboard.html">Bảng điều khiển</a>
        <a href="categories.html">Quản lý danh mục</a>
        <a href="item-manager.html">Quản lý món ăn</a>
        <a href="table-manager.html">Quản lý bàn</a>
        <a href="orders-manager.html">Quản lý đơn hàng</a>
    </div>

    <!-- Thêm bàn (dành cho admin) -->
    <div id="adminActions" class="admin-actions" style="text-align: end; margin-right: 20px; display: none;">
            <button class="btn" onclick="showAddTable()" style=" font-size: 20px;">➕ Thêm bàn</button>
    </div>

    <!-- Bộ lọc bàn -->
    <div style="text-align: center; margin: 15px;">
        <label for="tableFilter"><strong>Lọc bàn:</strong></label>
        <select id="tableFilter" onchange="loadTables()" style="padding: 6px; font-size: 16px;">
            <option value="ALL">Tất cả</option>
            <option value="Trống">Trống</option>
            <option value="Đang phục vụ">Đang phục vụ</option>
            <option value="Chờ thanh toán">Chờ thanh toán</option>
        </select>
    </div>

    <!-- Danh sách bàn -->
    <div class="table-grid" id="tableContainer"></div>

    <!-- Modal cho chi tiết đơn hàng -->
    <div id="modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <h3>Chi tiết đơn</h3>
            <div id="modalBody"></div>
        </div>
    </div>
    <!-- Modal cho thêm bàn mới -->
    <div id="addTableModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-x" onclick="closeAddTableModal()">&times;</span> 
            <h3>Thêm bàn mới</h3>
            <div>
                <input type="number" id="newTableNumber" placeholder="Nhập số bàn" style="width: 100%; padding: 8px;"/>
                <input type="number" id="newTableCapacity" placeholder="Nhập sức chứa" style="width: 100%; padding: 8px; margin-top: 8px;"/>
            </div>
            <div style="margin-top: 15px; text-align: right;">
                <button class="btn" onclick="submitNewTable()">Lưu</button>
            </div>
        </div>
    </div>

    <!-- Modal cập nhật bàn -->
    <div id="editTableModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-x" onclick="closeEditTableModal()">&times;</span> 
            <h3>Cập nhật bàn</h3>
            <div>
                <label>Số bàn</label>
                <input type="text" id="editTableNumber" readonly style="width: 100%; padding: 8px; background-color: #eee;"/>
                
                <label style="margin-top:8px;">QR Code URL</label>
                <input type="text" id="editQrCodeUrl" readonly style="width: 100%; padding: 8px; background-color: #eee;"/>

                <label style="margin-top:8px;">Trạng thái</label>
                <select id="editStatus" style="width: 100%; padding: 8px;">
                    <option value="Trống">Trống</option>
                    <option value="Đang phục vụ">Đang phục vụ</option>
                    <option value="Chờ thanh toán">Chờ thanh toán</option>
                </select>

                <label style="margin-top:8px;">Sức chứa</label>
                <input type="number" id="editCapacity" style="width: 100%; padding: 8px;"/>
            </div>
            <div style="margin-top: 15px; text-align: right;">
                <button class="btn" onclick="submitEditTable()">Lưu</button>
            </div>
        </div>
    </div>



<!-- WebSocket JS -->
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.6.1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script src="js/common.js"></script>
<script src="js/table-manager.js"></script>

</body>
</html>
